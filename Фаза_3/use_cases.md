# Use Cases — FinMate (приложение для учёта личных финансов)

---

## UC1. Регистрация пользователя

**Акторы:** Незарегистрированный пользователь  
**Цель:** Создать личный аккаунт для ведения учёта финансов в FinMate.  
**Предусловия:** У пользователя нет зарегистрированного аккаунта в системе.  
**Точка входа:** Экран приветствия / экран входа (кнопка «Зарегистрироваться»).

### Основной сценарий
1. Пользователь открывает экран регистрации.
2. Вводит e-mail, имя и пароль.
3. (Опционально) выбирает основную валюту и язык интерфейса.
4. Система проверяет корректность введённых данных (формат e-mail, сложность пароля).
5. Система создаёт новый аккаунт и отправляет письмо с подтверждением.
6. Пользователь переходит по ссылке из письма.
7. Система активирует учётную запись и перенаправляет пользователя в приложение или на экран входа.

### Альтернативные сценарии
- **A1:** E-mail уже зарегистрирован → система отображает сообщение об ошибке и предлагает войти.  
- **A2:** Неверный формат e-mail / слабый пароль → система подсвечивает поля и просит исправить.  
- **A3:** Ошибка при отправке письма → система сообщает о технической проблеме и предлагает повторить позже.

### Критерии приёмки
- При корректных данных создаётся новый аккаунт и отправляется письмо с подтверждением.
- Повторная регистрация с уже существующим e-mail невозможна.
- После активации аккаунта пользователь может успешно авторизоваться.

---

## UC2. Вход в систему

**Акторы:** Зарегистрированный пользователь  
**Цель:** Выполнить вход в FinMate для доступа к своим данным.  
**Предусловия:** Аккаунт зарегистрирован и активирован.  
**Точка входа:** Экран входа.

### Основной сценарий
1. Пользователь открывает экран входа.
2. Вводит e-mail и пароль.
3. Система проверяет учётные данные.
4. При успешной проверке система выполняет вход и открывает главный экран (дашборд).

### Альтернативные сценарии
- **A1:** Неверный пароль → система отображает сообщение об ошибке и предлагает повторить.  
- **A2:** Аккаунт не активирован → система предлагает отправить письмо с подтверждением повторно.  
- **A3:** Аккаунт заблокирован → система сообщает о блокировке и предлагает обратиться в поддержку.

### Критерии приёмки
- Вход возможен только при корректных учётных данных.
- При ошибках авторизации отображаются понятные сообщения.
- После входа пользователь видит свои данные (операции, бюджеты, статистику).

---

## UC3. Управление профилем и валютой

**Акторы:** Авторизованный пользователь  
**Цель:** Настроить личный профиль и параметры учёта (валюта, язык, безопасность).  
**Предусловия:** Пользователь авторизован.  
**Точка входа:** Раздел «Профиль» / «Настройки аккаунта».

### Основной сценарий
1. Пользователь открывает раздел «Профиль».
2. Система отображает текущие настройки профиля: имя, e-mail, основную валюту, язык, настройки безопасности.
3. Пользователь изменяет одно или несколько полей (например, валюту или язык интерфейса).
4. При смене пароля пользователь вводит текущий пароль и новый пароль.
5. Система проверяет корректность введённых данных и права на изменение.
6. Система сохраняет изменения и, при необходимости, обновляет отображение интерфейса (валюта, язык).

### Альтернативные сценарии
- **A1:** Введён неправильный текущий пароль при смене пароля → система не сохраняет изменения и показывает ошибку.  
- **A2:** Недопустимое значение (пустое имя, некорректный формат e-mail и т.п.) → система подсвечивает поле и просит исправить.  

### Критерии приёмки
- Изменения профиля сохраняются и корректно отображаются при следующем входе.
- Смена пароля возможна только при вводе верного текущего.
- Смена валюты влияет на отображение сумм и конвертацию в отчётах.

---

## UC4. Добавление расхода

**Акторы:** Авторизованный пользователь  
**Цель:** Зафиксировать новую расходную операцию.  
**Предусловия:** Пользователь авторизован; в системе есть хотя бы одна категория расходов и один счёт.  
**Точка входа:** Кнопка «Добавить расход» на дашборде или в разделе «Операции».

### Основной сценарий
1. Пользователь нажимает «Добавить расход».
2. Вводит сумму расхода.
3. Выбирает категорию (еда, транспорт и т.п.).
4. (Опционально) выбирает счёт (наличные, карта и т.д.).
5. (Опционально) указывает дату и комментарий.
6. Система проверяет корректность суммы и обязательных полей.
7. Система сохраняет операцию и обновляет баланс и статистику по расходам.

### Альтернативные сценарии
- **A1:** Не указана сумма или категория → система подсвечивает обязательные поля и не даёт сохранить.  
- **A2:** Неверный формат суммы → система показывает сообщение об ошибке.  
- **A3:** Нет сети → система сохраняет операцию локально и помечает её для последующей синхронизации.  

### Критерии приёмки
- При корректном вводе расход отображается в списке операций и учитывается в балансе и диаграммах.
- Ошибки ввода не приводят к сохранению некорректных данных.
- Пользователь может отменить добавление до сохранения.

---

## UC5. Добавление дохода

**Акторы:** Авторизованный пользователь  
**Цель:** Зафиксировать новую доходную операцию (зарплата, перевод и т.п.).  
**Предусловия:** Пользователь авторизован; в системе есть категории доходов и счёт.  
**Точка входа:** Кнопка «Добавить доход».

### Основной сценарий
1. Пользователь нажимает «Добавить доход».
2. Вводит сумму дохода.
3. Выбирает категорию (зарплата, подработка и т.п.).
4. (Опционально) выбирает счёт зачисления.
5. (Опционально) указывает дату и комментарий.
6. Система проверяет корректность суммы и обязательных полей.
7. Система сохраняет операцию и обновляет баланс и отчёты по доходам.

### Альтернативные сценарии
- **A1:** Не указана сумма или категория → система не даёт сохранить и выделяет поля.  
- **A2:** Неверный формат суммы → сообщение об ошибке.  
- **A3:** Нет сети → операция сохраняется локально и будет синхронизирована позже.  

### Критерии приёмки
- Доход отображается в списке операций и корректно увеличивает баланс.
- Сумма учитывается в отчётах по доходам по выбранной категории.
- Операцию можно отредактировать или удалить позже.

---

## UC6. Просмотр списка операций

**Акторы:** Авторизованный пользователь  
**Цель:** Просмотреть историю доходов и расходов за выбранный период.  
**Предусловия:** Пользователь авторизован; в системе есть хотя бы одна операция.  
**Точка входа:** Раздел «Операции» / вкладка «История».

### Основной сценарий
1. Пользователь открывает раздел «Операции».
2. Система отображает список последних операций (дата, сумма, категория, счёт).
3. Пользователь задаёт фильтры (период, тип операции, категория, счёт).
4. Система обновляет список с учётом фильтров.
5. Пользователь при необходимости открывает подробности отдельной операции.

### Альтернативные сценарии
- **A1:** Операций за выбранный период нет → система отображает сообщение «Нет операций за выбранный период».  
- **A2:** Ошибка загрузки данных (нет сети) → система показывает последние синхронизированные данные и уведомление об офлайн-режиме.  

### Критерии приёмки
- Список операций корректно фильтруется и сортируется.
- В карточке операции видны основные реквизиты.
- При отсутствии данных выводится понятное сообщение.

---

## UC7. Просмотр дашборда и статистики

**Акторы:** Авторизованный пользователь  
**Цель:** Получить сводную картину финансов: баланс, структура расходов, динамика.  
**Предусловия:** Пользователь авторизован; есть хотя бы одна операция.  
**Точка входа:** Главный экран приложения (дашборд).

### Основной сценарий
1. Пользователь открывает дашборд.
2. Система рассчитывает текущий баланс по счетам.
3. Система отображает графики: распределение расходов по категориям, динамику за период, топ-категории.
4. Пользователь при необходимости выбирает период (неделя, месяц, год).
5. Дашборд обновляется с учётом выбранного периода.

### Альтернативные сценарии
- **A1:** Недостаточно данных для построения статистики → система показывает заглушку и рекомендации «добавьте несколько операций».  
- **A2:** Ошибка получения данных → уведомление о проблеме и предложение обновить экран.  

### Критерии приёмки
- Баланс и графики соответствуют фактическим операциям.
- Переход между периодами происходит без заметных задержек.
- Пользователь может быстро увидеть «картинку» своих финансов за интересующий период.

---

## UC8. Управление категориями

**Акторы:** Авторизованный пользователь  
**Цель:** Настроить категории доходов и расходов под свои нужды.  
**Предусловия:** Пользователь авторизован.  
**Точка входа:** Раздел «Настройки» → «Категории».

### Основной сценарий
1. Пользователь открывает экран «Категории».
2. Система отображает список существующих категорий (доходы и расходы).
3. Пользователь выбирает действие: создать новую категорию, отредактировать или удалить существующую.
4. При создании/редактировании заполняет поля: название, тип (доход/расход), цвет/иконку.
5. Система валидирует данные и сохраняет изменения.
6. Обновлённый список категорий становится доступен при добавлении операций.

### Альтернативные сценарии
- **A1:** Попытка удалить категорию с привязанными операциями → система запрашивает подтверждение и/или предлагает переназначить операции на другую категорию.  
- **A2:** Дубликат названия категории → предупреждение и предложение изменить название.  

### Критерии приёмки
- Новые/изменённые категории доступны при вводе операций.
- Удаление категории не приводит к потере данных без явного согласия пользователя.
- Не допускается создание дубликатов категорий с одинаковым названием у одного пользователя.

---

## UC9. Настройка месячных бюджетов

**Акторы:** Авторизованный пользователь  
**Цель:** Задать лимиты по категориям и общий бюджет на период.  
**Предусловия:** Пользователь авторизован; есть хотя бы одна категория расходов.  
**Точка входа:** Раздел «Бюджеты» / кнопка «Создать бюджет».

### Основной сценарий
1. Пользователь открывает раздел «Бюджеты».
2. Система отображает текущие бюджеты (если есть).
3. Пользователь нажимает «Создать бюджет».
4. Выбирает период (месяц/неделя), категорию (или все расходы) и вводит сумму лимита.
5. (Опционально) настраивает дополнительные параметры: автопродление, уведомления.
6. Система проверяет корректность данных (лимит > 0, валидный период).
7. Система сохраняет бюджет и начинает отслеживать операции в рамках заданных условий.

### Альтернативные сценарии
- **A1:** Введён некорректный лимит (0 или отрицательный) → система не сохраняет бюджет и показывает ошибку.  
- **A2:** Пользователь задаёт несколько перекрывающихся бюджетов → система отображает предупреждение и показывает, какие бюджеты пересекаются.  

### Критерии приёмки
- Созданный бюджет появляется в списке активных.
- Все новые операции расходов учитываются в расчёте прогресса бюджета.
- Пользователь может редактировать или отключать бюджет.

---

## UC10. Контроль выполнения бюджета

**Акторы:** Авторизованный пользователь  
**Цель:** Отследить выполнение текущих бюджетов и получить уведомления о превышении лимитов.  
**Предусловия:** Есть хотя бы один активный бюджет (см. UC9).  
**Точка входа:** Виджет бюджета на дашборде или раздел «Бюджеты».

### Основной сценарий
1. Пользователь открывает дашборд или раздел «Бюджеты».
2. Система показывает список бюджетов с процентом выполнения (израсходовано / лимит).
3. Пользователь выбирает интересующий бюджет и открывает подробный просмотр.
4. Система отображает: лимит, израсходованную сумму, прогноз до конца периода, список операций, повлиявших на бюджет.
5. При достижении порога (например, 80%) система показывает предупреждение.
6. При превышении 100% лимита система помечает бюджет как «превышен» и показывает уведомление.

### Альтернативные сценарии
- **A1:** Бюджеты отключены или отсутствуют → система показывает заглушку и предлагает создать бюджет (см. UC9).  
- **A2:** Пользователь меняет параметры бюджета (лимит, период) → система пересчитывает прогресс с учётом новых настроек.  

### Критерии приёмки
- Процент выполнения бюджета корректно отражает отношение израсходованной суммы к лимиту.
- Уведомления о достижении и превышении лимита отображаются вовремя.
- Пользователь может понять, какие конкретно операции привели к достижению/превышению лимита.

---

## UC11. Экспорт данных

**Акторы:** Авторизованный пользователь  
**Цель:** Выгрузить свои финансовые данные для анализа, обмена или резервного копирования.  
**Предусловия:** Пользователь авторизован; есть операции за выбранный период.  
**Точка входа:** Раздел «Экспорт» или пункт меню на дашборде.

### Основной сценарий
1. Пользователь открывает раздел экспорта.
2. Выбирает формат файла (CSV, XLSX, PDF-отчёт).
3. Указывает период и тип данных (все операции, только расходы, только доходы).
4. Система формирует файл.
5. Пользователь скачивает файл на устройство или отправляет его по e-mail / в облако.

### Альтернативные сценарии
- **A1:** Операций за выбранный период нет → система сообщает об отсутствии данных и не формирует пустой отчёт (по настройкам).  
- **A2:** Ошибка генерации файла → система отображает сообщение и предлагает повторить попытку.  

### Критерии приёмки
- Содержание файла соответствует выбранным фильтрам.
- Файл корректно открывается внешними приложениями (табличный редактор, просмотрщик PDF).
- Конфиденциальные данные (пароль, токены доступа) не попадают в экспорт.

---

## UC12. Импорт / синхронизация с банком

**Акторы:** Авторизованный пользователь, внешний банковский сервис (Bank API)  
**Цель:** Автоматически импортировать банковские операции в FinMate и сопоставить их с категориями.  
**Предусловия:** Пользователь авторизован; банк поддерживает интеграцию (API или файл-выгрузку).  
**Точка входа:** Раздел «Синхронизация с банком» или мастер подключения банковского счёта.

### Основной сценарий
1. Пользователь открывает раздел синхронизации с банком.
2. Выбирает банк из списка поддерживаемых.
3. Проходит процедуру авторизации (OAuth / логин банка) или загружает файл выписки.
4. Система получает список транзакций за выбранный период.
5. Система предлагает сопоставить новые типы операций с категориями FinMate.
6. Пользователь подтверждает сопоставление и набор операций для импорта.
7. Система создаёт операции в FinMate и обновляет баланс и отчёты.
8. Система отмечает импортированные транзакции как обработанные, чтобы избежать повторного импорта.

### Альтернативные сценарии
- **A1:** Ошибка авторизации в банке → система сообщает об ошибке и предлагает повторить.  
- **A2:** Формат файла/ответа API не поддерживается → сообщение об ошибке и ссылка на инструкцию по поддерживаемым форматам.  
- **A3:** Обнаружены дубликаты транзакций → система показывает пользователю список возможных дублей и по умолчанию исключает их из импорта.  

### Критерии приёмки
- Импортированные транзакции корректно появляются в списке операций и учитываются в статистике.
- Пользователь контролирует список импортируемых транзакций и может отменить импорт до подтверждения.
- Дубликаты операций не создаются без явного согласия пользователя.



