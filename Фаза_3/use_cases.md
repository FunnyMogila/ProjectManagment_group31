# Use Cases — FinMate (приложение для учёта личных финансов)

---

## UC-01. Регистрация нового пользователя

**Акторы:** Незарегистрированный пользователь  
**Цель:** Создать личный аккаунт для ведения учёта финансов в FinMate.  
**Предусловия:** У пользователя нет зарегистрированного аккаунта в системе.  
**Точка входа:** Экран приветствия / экран входа (кнопка «Зарегистрироваться»).

### Основной сценарий
1. Пользователь открывает экран регистрации.
2. Вводит email, имя и пароль.
3. (Опционально) Выбирает основную валюту и язык интерфейса.
4. Система проверяет корректность введённых данных (формат email, сложность пароля).
5. Система создаёт новый аккаунт и отправляет письмо с подтверждением.
6. Пользователь переходит по ссылке из письма.
7. Система активирует учётную запись и перенаправляет на экран входа или в приложение.

### Альтернативные сценарии
- **A1:** Email уже зарегистрирован → система отображает сообщение об ошибке и предлагает войти.  
- **A2:** Неверный формат email / слабый пароль → система подсвечивает ошибки и предлагает исправить.  
- **A3:** Ошибка при отправке письма → система сообщает о технической проблеме и предлагает повторить позже.  

### Критерии приёмки
- При корректных данных создаётся новый аккаунт и отправляется письмо с подтверждением.
- Повторная регистрация с уже существующим email невозможна.
- После активации аккаунта пользователь может войти в систему.

---

## UC-02. Авторизация пользователя

**Акторы:** Зарегистрированный пользователь  
**Цель:** Выполнить вход в FinMate для доступа к своим данным.  
**Предусловия:** Аккаунт зарегистрирован и активирован.  
**Точка входа:** Экран входа.

### Основной сценарий
1. Пользователь открывает экран входа.
2. Вводит email и пароль.
3. Система проверяет учётные данные.
4. При успешной проверке система выполняет вход и открывает главный экран (дашборд).

### Альтернативные сценарии
- **A1:** Неверный пароль → система отображает сообщение об ошибке и предлагает повторить попытку.  
- **A2:** Аккаунт не активирован → система предлагает перейти по ссылке в письме или отправить письмо повторно.  
- **A3:** Аккаунт заблокирован → система отображает уведомление о блокировке и контакты поддержки.  

### Критерии приёмки
- Вход возможен только при корректных учётных данных.
- При ошибках авторизации отображаются понятные сообщения.
- После входа пользователю доступны его операции, бюджеты и статистика.

---

## UC-03. Добавление расхода

**Акторы:** Авторизованный пользователь  
**Цель:** Зафиксировать новую расходную операцию.  
**Предусловия:** Пользователь авторизован, в системе есть хотя бы одна категория расходов и счёт.  
**Точка входа:** Кнопка «Добавить расход» на главном экране или в разделе «Операции».

### Основной сценарий
1. Пользователь нажимает «Добавить расход».
2. Вводит сумму расхода.
3. Выбирает категорию (еда, транспорт и т.п.).
4. (Опционально) Выбирает счёт (наличные, карта и т.д.).
5. (Опционально) Указывает дату и комментарий.
6. Система проверяет корректность суммы и обязательных полей.
7. Система сохраняет операцию и обновляет баланс/статистику.

### Альтернативные сценарии
- **A1:** Не указана сумма или категория → система подсвечивает обязательные поля и не даёт сохранить.  
- **A2:** Неверный формат суммы → отображается сообщение об ошибке.  
- **A3:** Сеть недоступна → система сохраняет операцию локально и помечает для последующей синхронизации.  

### Критерии приёмки
- При корректном вводе расход появляется в списке операций и учитывается в балансе.
- Ошибки ввода не приводят к сохранению некорректных данных.
- Пользователь может отменить добавление до сохранения.

---

## UC-04. Добавление дохода

**Акторы:** Авторизованный пользователь  
**Цель:** Зафиксировать новую доходную операцию (зарплата, перевод и т.п.).  
**Предусловия:** Пользователь авторизован, есть хотя бы одна категория доходов и счёт.  
**Точка входа:** Кнопка «Добавить доход».

### Основной сценарий
1. Пользователь нажимает «Добавить доход».
2. Вводит сумму дохода.
3. Выбирает категорию (зарплата, подработка и т.п.).
4. (Опционально) Выбирает счёт зачисления.
5. (Опционально) Указывает дату и комментарий.
6. Система проверяет корректность суммы и обязательных полей.
7. Система сохраняет операцию и обновляет баланс и диаграммы доходов/расходов.

### Альтернативные сценарии
- **A1:** Не указана сумма или категория → система не даёт сохранить и выделяет поля.  
- **A2:** Неверный формат суммы → сообщение об ошибке.  
- **A3:** Сеть недоступна → операция сохраняется локально и будет синхронизирована позже.  

### Критерии приёмки
- Доход корректно отображается в списке операций и увеличивает баланс.
- В отчётах по доходам сумма учитывается в нужной категории.
- Пользователь может отредактировать или удалить операцию позже.

---

## UC-05. Просмотр списка операций

**Акторы:** Авторизованный пользователь  
**Цель:** Просмотреть историю доходов и расходов за выбранный период.  
**Предусловия:** Пользователь авторизован; в системе есть хотя бы одна операция.  
**Точка входа:** Раздел «Операции» / вкладка «История».

### Основной сценарий
1. Пользователь открывает раздел «Операции».
2. Система отображает список последних операций (дата, сумма, категория, счёт).
3. Пользователь задаёт фильтры (период, тип операции, категория, счёт).
4. Система обновляет список с учётом фильтров.
5. Пользователь при необходимости переходит к деталям конкретной операции.

### Альтернативные сценарии
- **A1:** Операций за выбранный период нет → система отображает сообщение «Нет операций за выбранный период».  
- **A2:** Ошибка загрузки данных (нет сети) → система показывает последние синхронизированные данные и уведомление об офлайн-режиме.  

### Критерии приёмки
- Список операций отображается корректно и обновляется при изменении фильтров.
- Каждая операция содержит основные реквизиты (дата, сумма, категория, счёт).
- При отсутствии данных пользователь видит информативное сообщение.

---

## UC-06. Просмотр дашборда и статистики

**Акторы:** Авторизованный пользователь  
**Цель:** Получить сводную картину финансов: баланс, структура расходов, динамика.  
**Предусловия:** Пользователь авторизован; есть хотя бы одна операция.  
**Точка входа:** Главный экран приложения (дашборд).

### Основной сценарий
1. Пользователь открывает дашборд.
2. Система рассчитывает текущий баланс по счетам.
3. Система отображает графики: распределение расходов по категориям и динамику за период.
4. Пользователь при необходимости меняет период (неделя, месяц, год).
5. Дашборд обновляется с учётом выбранного периода.

### Альтернативные сценарии
- **A1:** Недостаточно данных для построения графиков → система показывает заглушку и рекомендации «добавьте несколько операций».  
- **A2:** Ошибка получения данных → уведомление о проблеме и предложение перезагрузить экран.  

### Критерии приёмки
- Баланс и графики соответствуют фактическим операциям.
- Изменение периода приводит к корректному пересчёту показателей.
- Интерфейс дашборда остаётся отзывчивым (загрузка не более нескольких секунд).

---

## UC-07. Управление категориями

**Акторы:** Авторизованный пользователь / Администратор (для глобальных категорий)  
**Цель:** Настроить категории доходов и расходов под свои нужды.  
**Предусловия:** Пользователь авторизован.  
**Точка входа:** Раздел «Настройки» → «Категории».

### Основной сценарий
1. Пользователь открывает экран «Категории».
2. Система показывает список текущих категорий (доходы и расходы).
3. Пользователь выбирает действие: создать, редактировать или удалить категорию.
4. При создании/редактировании вводит название, тип (доход/расход), цвет/иконку.
5. Система валидирует данные и сохраняет изменения.
6. Список категорий обновляется; новые категории становятся доступны при добавлении операций.

### Альтернативные сценарии
- **A1:** Попытка удалить категорию с существующими операциями → система запрашивает подтверждение и/или предлагает переназначить операции на другую категорию.  
- **A2:** Дубликат названия категории → предупреждение и предложение выбрать другое название.  

### Критерии приёмки
- Созданные/изменённые категории доступны в форме добавления операций.
- Удаление категории не приводит к потере данных без явного подтверждения.
- В системе не может существовать двух категорий одного типа с одинаковым названием для одного пользователя.

---

## UC-08. Настройка и контроль бюджетов

**Акторы:** Авторизованный пользователь  
**Цель:** Планировать расходы и отслеживать выполнение бюджетов.  
**Предусловия:** Пользователь авторизован; есть хотя бы одна категория расходов.  
**Точка входа:** Раздел «Бюджеты» или виджет бюджета на дашборде.

### Основной сценарий
1. Пользователь открывает раздел «Бюджеты».
2. Система отображает список текущих бюджетов (по категориям и общий).
3. Пользователь выбирает «Создать бюджет».
4. Указывает период (месяц/неделя), категорию (или «все расходы») и лимит суммы.
5. Система сохраняет бюджет и начинает отслеживать операции.
6. При превышении 80% лимита система показывает предупреждение.
7. При превышении 100% лимита система помечает бюджет как «превышен» и показывает уведомление.

### Альтернативные сценарии
- **A1:** Некорректный лимит (отрицательное значение, ноль) → система не позволяет сохранить бюджет.  
- **A2:** Пересечение нескольких бюджетов (одна категория в нескольких лимитах) → система показывает пользователю, какие бюджеты будут затронуты.  

### Критерии приёмки
- Бюджет корректно учитывает все операции за выбранный период и выбранную категорию.
- Уведомления о достижении/превышении лимита приходят при соответствующих условиях.
- Пользователь может просмотреть историю бюджетов за прошлые периоды.

---

## UC-09. Экспорт данных

**Акторы:** Авторизованный пользователь  
**Цель:** Выгрузить свои финансовые данные для анализа или резервного копирования.  
**Предусловия:** Пользователь авторизован; есть операции за выбранный период.  
**Точка входа:** Раздел «Экспорт» или меню на дашборде.

### Основной сценарий
1. Пользователь открывает раздел экспорта.
2. Выбирает формат файла (CSV, XLSX, PDF-отчёт).
3. Указывает период и тип данных (все операции, только расходы, только доходы).
4. Система подготавливает файл.
5. Пользователь скачивает файл на устройство или отправляет его на email/в облако.

### Альтернативные сценарии
- **A1:** Операций за выбранный период нет → система сообщает об отсутствии данных и не генерирует пустой файл (по настройкам).  
- **A2:** Ошибка генерации файла → система показывает сообщение и предлагает повторить попытку.  

### Критерии приёмки
- Содержание выгружаемого файла соответствует отфильтрованным операциям.
- Файл успешно открывается стандартными приложениями (таблица/просмотр PDF).
- Конфиденциальные данные (пароль и т.п.) не попадают в экспорт.

---

## UC-10. Импорт и синхронизация с банковским сервисом

**Акторы:** Авторизованный пользователь, внешний **Bank API**  
**Цель:** Автоматически импортировать банковские операции в FinMate.  
**Предусловия:** Пользователь авторизован; банк поддерживает интеграцию (API или файл-выгрузку).  
**Точка входа:** Раздел «Синхронизация с банком» или мастер подключения банковского счёта.

### Основной сценарий
1. Пользователь открывает раздел синхронизации с банком.
2. Выбирает банк из списка поддерживаемых.
3. Подтверждает доступ (OAuth/логин банка или загрузка файла выписки).
4. Система получает список транзакций за выбранный период.
5. Система предлагает пользователю сопоставить категории для новых типов операций.
6. Пользователь подтверждает импорт.
7. Система создаёт новые операции в FinMate и обновляет баланс и отчёты.

### Альтернативные сценарии
- **A1:** Ошибка авторизации в банке → система сообщает об ошибке и предлагает повторить.  
- **A2:** Формат выписки не поддерживается → система показывает сообщение и предлагает инструкции по поддерживаемым форматам.  
- **A3:** Дубликаты операций → система обнаруживает ранее импортированные транзакции и не создаёт дубли, уведомляя пользователя.  

### Критерии приёмки
- Импортированные транзакции корректно появляются в списке операций и учитываются в аналитике.
- Пользователь контролирует, какие операции и за какой период импортируются.
- При ошибках связи с банком пользователь получает понятные уведомления, а данные не искажаются.


